========================================================
Creating a sample job
=======================================================

Example 1: Firstjob - Execute shell
--------

CREATING A JOB:
---------------
New item -- > Name -- > Free Style -- > Ok
Description --> THis is my first job
Build Steps --> Execute Shell --> echo "Welcome to Jenkins" --> Save
Build Now

--> Now Modify Build --> echo "Welcome to Jenkins" > /tmp/first-job.txt

Run the build

see in Jenkins server --> cd /tmp/  [What ever we create in pipeline, all files will be stored in jenkins server]

--> lets create a small bash script

    vi     basic.sh
    #!/bin/bash
    echo "This is sample script under tmp"

sh basic.sh

Edit the job and modify the script . If you want to run any script which is there on server from pipeline

echo "Welcome to Jenkins" > /tmp/first-job.txt
bash /tmp/basic.sh

Run the Build and see Output

Build with Parameters
------------------

Edit the Job --> THis Project is Parameterized
Example --> Select --> String Parameter
Name = FirstName
Default Value = Reyaz

One more

Select --> String Parameter
Name = LastName
Default Value = Shaik


Nows lets use these parameters in script

echo "I am" $FirstName $LastName
echo "Welcome to Jenkins"
echo "Welcome to Jenkins" > /tmp/first-job.txt
bash /tmp/basic.sh

Run the Build

By default, you get Reyaz shaik, but you can override it with other string/name

see the output


Another Example:  Lets add choice parameter: Edit the Build Job
-----------------
--> This Project is Parameterized --> Add Parameter --> choice Parameter
Name: Gender
Choices:
MALE
FEMALE
OTHER

Edit the Script and add $Gender

echo $FirstName $LastName $Gender
echo "Welcome to Jenkins"
echo "Welcome to Jenkins" > /tmp/first-job.txt
bash /tmp/basic.sh

Another Example: Lets add choice Parameter : Edit the Build Job
-----------------
--> This Project is Parameterized --> Add Parameter --> choice Parameter
Name: ENV
Choices:
Production
Development

echo "I am" $FirstName $LastName $Gender
echo "Welcome to Jenkins Pipeline by Reyaz" > /tmp/first-job.txt
bash /tmp/basic.sh
echo "Deploying to environment: $ENV"
if [ "$ENV" = "Production" ]; then
  echo "Warning: You are deploying to Production!"
else
   echo "Deploying to $ENV Environment."
fi



Scheduling the job
----------------

If you want to run the job based on schedule, we can use Build Periodically option

Create a new free style job --> Name = cron-job

Description --> THis is scheduled job
Build Periodically --> *****  -- every min  */5 * * * *  -- Every 5 mins

search in google -- cronjob generator -- https://crontab.cronhub.io/

Build Steps --> Execute Shell --> echo "Welcome to Jenkins" --> Save

Build Now

This job will build every min



CREATING A JOB : Integration with GitHub
----------------------------------------

Note: To integrate any tool, we need to install plugins first.

Check if git plugins are available, if available, no need to install. If not, install plugins

Example 1 : Simple, Lets get source code to Jenkins
-------------------------------------------
New item -- > GetCodefromGit -- > Free Style -- > Ok --> source code management --> GIT

--> Repo URL(take sample project repo) https://github.com/ReyazShaik/website.git

--> Branch : master , keep default or change    

Run the Build

Now see the data Click on GetCodefromGit job --> WorkSpace

Where is the code now in Jenkin server?

cd /var/lib/Jenkins/workspace/

cd GetCodefromGit



Example 2:
----------
New item -- > Name -- > Free Style -- > Ok --> source code management

--> Repo URL(take sample maven project repo) https://github.com/ReyazShaik/java-project-maven-new.git

or take sample maven project https://github.com/jenkins-docs/simple-java-maven-app.git

--> Branch : master , keep default or change    

Build step --> Select Execute shell --> mvn clean package (sample) --> save --> build now

If fails: In general, GitHub uses main branch instead master --> in job replace /master with /main

GO to Jenkins Linux machine

--> cd /var/lib/Jenkins/workspace/Firstjob/target/

ls --> war file will be here


Example 2: Secondjob
----------
New item -- > Name -- > Free Style -- > Ok --> source code management

--> Repo URL(take sample maven project repo) https://github.com/ReyazShaik/java-project-maven-new.git

--> Branch : master , keep default or change

--> Build step --> Invoke top-level Maven targets --> just clean package (no need to give mvn)    

--> Build Now

GO to Jenkins Linux machine

--> cd /var/lib/Jenkins/workspace/Firstjob/target/

ls --> war file will be here


Now, change the file in GitHub --> index.html or pom.xml and build now

Every time developer do changes he will do build --> this is called continuous integration

Email Notification
==================

If build fails, we should get notifications

Manage Jenkins --> System --> Email Notification

SMTP server = smtp.gmail.com
Default user e-mail suffix= @jenkinstest.com
Use SMTP Authentication = Username = reyazr3f@gmail.com
For password = Go to browser --> gmail profile--> Manage your Google Account --> Security --> Turn ON 2-steps authentication -->  On Top --> Search for App Password --> App name --> Jenkins --> Create --> Copy code -->
miqx ynqp dprc qgpt --> Done
                  copy the code and paste in password section


Use SSL
SMTP Port = 465
Test configuration by sending test e-mail = reyazr3f@gmail.com = Test Configuration

Edit the job --> Configuration --> Post-build Actions --> Recipients = reyazr3f@gmail.com
And Fail the job to get email

Restore Deleted Job
=================

If you accidentally delete the job , how to restore

Install plugin = job configuration history

Delete a job now --> Go to Dashboard --> click on job config history --> show delete jobs --> restore

note: If you install the plugin initially then all jobs create after plugin installation , restore option is available

Create a new job and delete

Delete a job now --> Go to Dashboard --> click on job config history --> show delete jobs --> restore